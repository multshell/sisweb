<h1 class="page-header">Fornecedores</h1>

    <div class="panel panel-default">
        <div class="panel-heading">
            Listando Fornecedores
            <% if policy(@fornecedores).new? %>
                <%= link_to new_fornecedor_path, class: "btn btn-success btn-sm pull-right", style: "margin-top: -5px" do %>
                    <i class="fa fa-plus"></i>
                <% end %>
            <% else %>
                <%= link_to '#', disabled: 'disabled', class:"btn btn-success btn-sm pull-right", style:"margin-top: -5px" do %>
                    <i class="fa fa-plus"></i>
                <% end %>
            <% end %>
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
            <div>
                <table id="fornecedores" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Razão Social</th>
                            <th>Contato</th>
                            <th>Telefone</th>
                            <th>Email</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @fornecedores.each do |fornecedor| %>
                        <tr>
                            <td><%= fornecedor.id %></td>
                            <td><%= fornecedor.nome %></td>
                            <td><%= fornecedor.contato %></td>
                            <td><%= fornecedor.telefone %></td>
                            <td><%= fornecedor.email %></td>
                            <td width="50">
                                <div class="pull-right">
                                    <% if policy(@fornecedores).edit? %>
                                        <%= link_to edit_fornecedor_path(fornecedor), class: "btn btn-primary btn-xs" do %>
                                            <i class="fa fa-edit"></i>
                                        <% end %>
                                    <% else %>
                                        <%= link_to '#', disabled: 'disabled', class:"btn btn-primary btn-xs" do %>
                                            <i class="fa fa-edit"></i>
                                        <% end %>
                                    <% end %>
                                    <% if policy(@fornecedores).destroy? and fornecedor.contratos.length == 0 %>
                                        <%= link_to fornecedor_path(fornecedor),
                                                method: :delete,
                                                class: "btn btn-danger btn-xs",
                                                data: {confirm: "Você deseja realmente excluir (<b>#{fornecedor.nome}</b>)?"} do %>
                                            <i class="fa fa-minus"></i>
                                        <% end %>
                                    <% else %>
                                        <%= link_to '#', disabled: 'disabled', class:"btn btn-danger btn-xs" do %>
                                            <i class="fa fa-minus"></i>
                                        <% end %>
                                    <% end %>
                                </div>
                            </td>
                        </tr>
                        <% end %>
                    </tbody>
                </table>
                
            </div>
            <!-- /.table-responsive -->
        </div>
            <!-- /.panel-body -->
        </div>
