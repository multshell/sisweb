<h1 class="page-header">Usuários</h1>

    <div class="panel panel-default">
        <div class="panel-heading">
            Listando Usuários
            <% if policy(@users).new? %>
                <%= link_to new_user_path, class: "btn btn-success btn-sm pull-right", style: "margin-top: -5px" do %>
                    <i class="fa fa-plus"></i>
                <% end %>
            <% end %>
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
            <div>
                <table id="users" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Tipo de Acesso</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @users.each do |user| %>
                        <tr>
                            <td><%= user.id %></td>
                            <td><%= user.name %></td>
                            <td><%= user.email %></td>
                            <td><%= user.role_i18n %></td>
                            <td width="50">
                                <div class="pull-right">
                                    <% if (user.role != 'completo') && policy(@users).edit? %>
                                        <%= link_to edit_user_path(user), class: "btn btn-primary btn-xs" do %>
                                            <i class="fa fa-edit"></i>
                                        <% end %>
                                    <% else %>
                                        <%= link_to '#', disabled: 'disabled', class:"btn btn-primary btn-xs" do %>
                                            <i class="fa fa-edit"></i>
                                        <% end %>
                                    <% end %>
                                    <% if (user.role != 'completo') && policy(@users).destroy? %>
                                        <%= link_to user_path(user),
                                                    method: :delete,
                                                    class: "btn btn-danger btn-xs",
                                                    data: {confirm: "Você deseja realmente excluir (<b>#{user.email}</b>)?"} do %>
                                            <i class="fa fa-minus"></i>
                                        <% end %>
                                    <% else %>
                                        <%= link_to '#',
                                                    disabled: "disable",
                                                    class: "btn btn-danger btn-xs" do %>
                                            <i class="fa fa-minus"></i>
                                        <% end %>
                                    <% end %>
                                </div>
                            </td>
                        </tr>
                        <% end %>
                    </tbody>
                </table>
            </div>
            <!-- /.table-responsive -->
        </div>
            <!-- /.panel-body -->
        </div>
